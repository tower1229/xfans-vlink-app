---
description: 本文档定义了项目的目录结构规范，确保代码组织的一致性和可维护性。
globs: 
alwaysApply: true
---

# 目录结构规范

> 本文档定义了项目的目录结构规范，确保代码组织的一致性和可维护性。

## 快速参考

- 使用 `app/` 作为所有源代码的根目录
- API 相关代码放在 `app/api/` 目录下
- 前端组件放在 `app/_components/` 目录下
- 核心库文件放在 `app/_lib/` 目录下
- 通用工具函数放在 `app/_utils/` 目录下
- 前端接口调用函数放在 `app/_actions/` 目录下
- react hooks 放在 `app/_hooks/` 目录下
- mobx 状态管理文件放在 `app/_stores/` 目录下
- 类型定义文件放在 `app/_types/` 目录下
- 前端 layout 文件放在 `app/(core)` 目录下

## 目录结构图

```bash
app/
├── api/                    # API 相关代码
│   ├── controllers/       # 控制器层，处理请求和响应
│   ├── middleware/       # 中间件，如认证、错误处理等
│   ├── schemas/         # 数据验证模式
│   ├── utils/           # 工具函数
│   │   ├── redis.mjs   # Redis 缓存工具
│   │   └── userUtils.js # 用户相关工具函数
│   └── v1/             # API 版本
│       └── users/      # 用户相关路由
├── _components/           # React 组件
├── _actions/              # 前端接口调用函数
├── _hooks/              # react hooks
├── _providers/           # react providers
├── _stores/              # mobx 状态管理
├── _types/              # 类型定义
└── _utils/             # 通用工具函数
```

## 命名规范

### 目录命名

\`\`\`typescript
// ✅ 正确的目录命名
app/api/v1/users/
app/_components/UserProfile/

// ❌ 错误的目录命名
app/API/V1/Users/ // 不要使用大写
app/_components/user-profile/ // 组件目录使用 PascalCase
\`\`\`

### 文件命名

\`\`\`typescript
// ✅ 正确的文件命名
UserProfile.tsx
userUtils.js
auth.middleware.js
user.schema.js

// ❌ 错误的文件命名
userprofile.tsx // 组件文件应使用 PascalCase
UserUtils.js // 工具函数应使用 camelCase
Auth.js // 中间件文件应包含 .middleware 后缀
\`\`\`

## 目录职责

### `app/api/`

**用途**：存放所有后端 API 相关代码
**原则**：按功能模块和版本组织

\`\`\`typescript
// ✅ 推荐的组织方式
app/api/v1/users/route.js
app/api/controllers/userController.js
app/api/middleware/auth.js

// ❌ 避免的方式
app/api/users.js // 未遵循版本化
app/api/v1/controller.js // 未按功能模块分离
\`\`\`

## 最佳实践

1. **目录结构扁平化**

   ```typescript
   // ✅ 推荐的结构
   app/components/UserProfile/
   app/components/UserSettings/

   // ❌ 避免的结构
   app/_components/User/Profile/Settings/
   ```

2. **相关文件集中**

   ```typescript
   // ✅ 推荐的组织方式
   app/_components/UserProfile/
   ├── index.tsx
   ├── styles.css
   ├── types.ts
   └── tests/

   // ❌ 避免的组织方式
   app/
   ├── _components/UserProfile.tsx
   ├── styles/UserProfile.css
   └── types/UserProfile.ts
   ```

3. **使用 index 文件**

   ```typescript
   // ✅ 推荐的方式
   // app/api/controllers/index.js
   export * from "./userController";
   export * from "./orderController";

   // ❌ 避免的方式
   // 直接导入具体文件
   import { userController } from "./api/controllers/userController";
   ```
